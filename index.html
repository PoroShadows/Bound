<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Lofte by PoroShadows</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Lofte</h1>
      <h2 class="project-tagline">A promise library implemanting the Promises/A+ specification and a little more</h2>
      <a href="https://github.com/PoroShadows/Lofte" class="btn">View on GitHub</a>
    </section>

    <section class="main-content">
      <h1>
<a id="lofte" class="anchor" href="#lofte" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Lofte</h1>

<p>A promise library implementing the Promises/A+ specification and a little more</p>

<p><a href="https://promisesaplus.com/"><img src="https://promisesaplus.com/assets/logo-small.png" alt="Promises/A+ logo" title="Promises/A+ 1.0 compliant"></a>
<a href="https://travis-ci.org/PoroShadows/Lofte"><img src="https://img.shields.io/travis/PoroShadows/Lofte.svg?style=flat-square" alt="Build Status"></a>
<a href="https://npmjs.org/package/lofte"><img src="https://img.shields.io/npm/v/lofte.svg?style=flat-square" alt="NPM version"></a>
<a href="https://npmjs.org/package/lofte"><img src="http://img.shields.io/npm/dm/lofte.svg?style=flat-square" alt="NPM Downloads"></a>
<a href="LICENSE.md"><img src="http://img.shields.io/npm/l/lofte.svg?style=flat-square" alt="License"></a></p>

<p>If you do not know anything about promises I recommend you check out the <a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise">MDN</a> article about promises.</p>

<h2>
<a id="quick-access" class="anchor" href="#quick-access" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Quick access</h2>

<ol>
<li><a href="#a-beginning-example">A beginning example</a></li>
<li><a href="#getting-installed">Getting installed</a></li>
<li>
<a href="#api">API</a>

<ul>
<li><a href="#synchronous-checks">Synchronous checks</a></li>
<li><a href="#method-delay"><code>delay</code></a></li>
<li><a href="#method-cancel"><code>cancel</code></a></li>
<li><a href="#method-callback"><code>callback</code></a></li>
<li><a href="#loftepromisify"><code>Lofte.promisify</code></a></li>
<li><a href="#lofteflow"><code>Lofte.flow</code></a></li>
</ul>
</li>
</ol>

<h2>
<a id="a-beginning-example" class="anchor" href="#a-beginning-example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>A beginning example</h2>

<p>of how it is to work with a promise</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">var</span> Lofte <span class="pl-k">=</span> <span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">"</span>lofte<span class="pl-pds">"</span></span>);

<span class="pl-smi">Lofte</span>.<span class="pl-en">resolve</span>(<span class="pl-s"><span class="pl-pds">"</span>Supports<span class="pl-pds">"</span></span>)
    .<span class="pl-en">then</span>(<span class="pl-k">function</span> (<span class="pl-smi">text</span>) {
        <span class="pl-k">return</span> text <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">"</span> es5<span class="pl-pds">"</span></span>
    })
    .<span class="pl-en">then</span>(<span class="pl-smi">text</span> <span class="pl-k">=&gt;</span> <span class="pl-s"><span class="pl-pds">`</span><span class="pl-s1"><span class="pl-pse">${</span>text<span class="pl-pse">}</span></span> and above<span class="pl-pds">`</span></span>)
    .<span class="pl-en">then</span>(<span class="pl-en">console</span>.<span class="pl-smi">log</span>) <span class="pl-c">// output: Supports es5 and above</span></pre></div>

<h2>
<a id="getting-installed" class="anchor" href="#getting-installed" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting installed</h2>

<ul>
<li>Install with NPM: <code>npm install lofte</code>
</li>
<li>(Hopefully a cdn release)</li>
</ul>

<h2>
<a id="api" class="anchor" href="#api" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>API</h2>

<p>Wait there is more than the standards O.O.</p>

<p>One thing to note is that the <code>race</code> method do not get stuck if the 
iterable is empty. It just resolves directly.</p>

<p><img src="https://i.imgflip.com/1f2lkm.jpg" alt="One does not simply meme image" title="Wow so original"></p>

<h3>
<a id="synchronous-checks" class="anchor" href="#synchronous-checks" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Synchronous checks</h3>

<p>With Lofte promises you can synchronously check if it is pending, 
resolved, rejected, fulfilled or canceled.</p>

<p>Takes no parameters and returns a boolean based on if it in that state 
or not.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">const</span> <span class="pl-c1">lofte</span> <span class="pl-k">=</span> <span class="pl-en">someLoftePromise</span>()

<span class="pl-smi">lofte</span>.<span class="pl-en">isPending</span>()
<span class="pl-smi">lofte</span>.<span class="pl-en">isResolved</span>()
<span class="pl-smi">lofte</span>.<span class="pl-en">isRejected</span>()
<span class="pl-smi">lofte</span>.<span class="pl-en">isFulfilled</span>()
<span class="pl-smi">lofte</span>.<span class="pl-en">isCanceled</span>()</pre></div>

<h3>
<a id="method-delay" class="anchor" href="#method-delay" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Method <code>delay</code>
</h3>

<p><strong>.delay(milliseconds)</strong></p>

<p>Delay the execution of the promise by x number of milliseconds.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-smi">Lofte</span>.<span class="pl-en">resolve</span>(<span class="pl-s"><span class="pl-pds">'</span>I am a second late<span class="pl-pds">'</span></span>)
    .<span class="pl-en">delay</span>(<span class="pl-c1">1000</span>)
    .<span class="pl-en">then</span>(<span class="pl-en">console</span>.<span class="pl-smi">log</span>)</pre></div>

<h3>
<a id="method-cancel" class="anchor" href="#method-cancel" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Method <code>cancel</code>
</h3>

<p><strong>.cancel()</strong></p>

<p>Cancel a <em>Lofte</em> promise.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">const</span> <span class="pl-c1">lofte</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Lofte</span>((<span class="pl-smi">reolve</span>, <span class="pl-smi">reject</span>, <span class="pl-smi">onCancel</span>) <span class="pl-k">=&gt;</span> {
    <span class="pl-k">const</span> <span class="pl-c1">xhr</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">XMLHttpRequest</span>()
    <span class="pl-c">// ...</span>

    <span class="pl-c">// if the proseding is not done the promise does not truly become cancelable</span>
    <span class="pl-en">onCancel</span>(() <span class="pl-k">=&gt;</span> {
        <span class="pl-smi">xhr</span>.<span class="pl-c1">abort</span>()
    })
})</pre></div>

<h3>
<a id="method-callback" class="anchor" href="#method-callback" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Method <code>callback</code>
</h3>

<p><strong>.callback(function)</strong></p>

<p>If you are so obsessed with callbacks that it is a drug to you. Here you go. Turn the promise into a callback.</p>

<div class="highlight highlight-source-js"><pre><span class="pl-en">someFunctionThatReturnsALoftePromise</span>().<span class="pl-en">callback</span>(<span class="pl-k">function</span> (<span class="pl-smi">error</span>, <span class="pl-smi">value</span>) {
    <span class="pl-c">// Just you typical callback function</span>
})</pre></div>

<h3>
<a id="loftepromisify" class="anchor" href="#loftepromisify" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>Lofte.promisify</code>
</h3>

<p><strong>Lofte.promisify(function, [argumentCount], [hasErrorPar])</strong></p>

<p>Turn a function with a callback to a promise returning function</p>

<div class="highlight highlight-source-js"><pre><span class="pl-k">const</span> <span class="pl-c1">fs</span> <span class="pl-k">=</span> <span class="pl-c1">require</span>(fs)

<span class="pl-k">const</span> <span class="pl-c1">readFile</span> <span class="pl-k">=</span> <span class="pl-smi">Lofte</span>.<span class="pl-en">promisify</span>(<span class="pl-smi">fs</span>.<span class="pl-smi">readFile</span>)

<span class="pl-en">readFile</span>(<span class="pl-s"><span class="pl-pds">'</span>anything.txt<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>utf-8<span class="pl-pds">'</span></span>).<span class="pl-en">then</span>(<span class="pl-en">console</span>.<span class="pl-smi">log</span>)</pre></div>

<h3>
<a id="lofteflow" class="anchor" href="#lofteflow" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>Lofte.flow</code>
</h3>

<p><strong>Lofte.flow(generator)</strong></p>

<p>Basically makes coroutines with es6/es2015 generators</p>

<div class="highlight highlight-source-js"><pre><span class="pl-c">// going of last example</span>
<span class="pl-k">const</span> <span class="pl-c1">readFile</span> <span class="pl-k">=</span> <span class="pl-smi">Lofte</span>.<span class="pl-en">promisify</span>(<span class="pl-c1">require</span>(<span class="pl-s"><span class="pl-pds">'</span>fs<span class="pl-pds">'</span></span>).<span class="pl-smi">readFile</span>)

<span class="pl-smi">Lofte</span>.<span class="pl-en">flow</span>(<span class="pl-k">function</span><span class="pl-k">*</span> () {
    <span class="pl-k">try</span> {
        <span class="pl-k">const</span> <span class="pl-c1">files</span> <span class="pl-k">=</span> <span class="pl-k">yield</span> <span class="pl-smi">Lofte</span>.<span class="pl-c1">all</span>([
            <span class="pl-en">readFile</span>(<span class="pl-s"><span class="pl-pds">'</span>path/to/file1.txt<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>utf-8<span class="pl-pds">'</span></span>),
            <span class="pl-en">readFile</span>(<span class="pl-s"><span class="pl-pds">'</span>path/to/file2.txt<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>utf-8<span class="pl-pds">'</span></span>)
        ])
        <span class="pl-k">const</span> <span class="pl-c1">file1</span> <span class="pl-k">=</span> files[<span class="pl-c1">0</span>], file2 <span class="pl-k">=</span> files[<span class="pl-c1">1</span>]

        <span class="pl-c">// the same but with decomposition</span>
        <span class="pl-k">const</span> [<span class="pl-c1">file1</span>, <span class="pl-c1">file2</span>] <span class="pl-k">=</span> <span class="pl-k">yield</span> <span class="pl-smi">Lofte</span>.<span class="pl-c1">all</span>([
            <span class="pl-en">readFile</span>(<span class="pl-s"><span class="pl-pds">'</span>path/to/file1.txt<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>utf-8<span class="pl-pds">'</span></span>),
            <span class="pl-en">readFile</span>(<span class="pl-s"><span class="pl-pds">'</span>path/to/file2.txt<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>utf-8<span class="pl-pds">'</span></span>)
        ])
    } <span class="pl-k">catch</span> (e) {
        <span class="pl-en">console</span>.<span class="pl-c1">error</span>(e)
    }
})</pre></div>

<p>See <del><a href="https://github.com/PoroShadows/Lofte/wiki" title="Lofte wiki">wiki</a></del> for more</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/PoroShadows/Lofte">Lofte</a> is maintained by <a href="https://github.com/PoroShadows">PoroShadows</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
